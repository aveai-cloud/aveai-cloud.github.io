import{_ as b,q as y,s as v,u as S,c as V,b as r,w as t,m as C,r as a,o as P,j as m,t as x,a as i,p as E,k}from"./index-DT-wo-ax.js";const z={name:"Login",data(){return{form:{email:"",password:"",confirmPassword:"",selected:!1,code:""},rules:{email:[{required:!0,message:"please enter email",trigger:"blur"},{pattern:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"please enter correct email",trigger:"blur"}],code:[{required:!0,message:"please enter code",trigger:"blur"},{min:6,max:6,message:"please enter 6 code",trigger:"blur"}],password:[{required:!0,message:"please enter password",trigger:"blur"}],confirmPassword:[{required:!0,message:"please enter confirm password",trigger:"blur"},{validator:(n,c,o)=>{c!==this.form.password?o(new Error("Entered passwords differ!")):o()},trigger:"blur"}],selected:[{validator:(n,c,o)=>{c?o():o(new Error("Please agree to the service agreement"))},trigger:"change"}]},loading:!1,isSending:!1,countdown:60,timer:null,loadingRegister:!1}},mounted(){},computed:{buttonText(){return this.isSending?`${this.countdown} s`:"Get Code"}},methods:{checkEmail(){let s=this.form.email;y(s).then(e=>{}).catch(e=>{this.$message.error(e)})},async sendVerificationCode(){this.isSending=!0;let s={emailType:"register",email:this.form.email};v(s).then(e=>{this.$message.success("The verification code has been sent, please check your email!"),this.startCountdown()}).catch(e=>{this.$message.error(e),this.isSending=!1}).finally(()=>{})},validateEmail(s){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)},startCountdown(){this.timer=setInterval(()=>{this.countdown<=0?(clearInterval(this.timer),this.isSending=!1,this.countdown=60):this.countdown--},1e3)},register(){this.$refs.form.validate(s=>{if(s){let e={email:this.form.email,password:this.form.password,code:this.form.code};this.loadingRegister=!0,S(e).then(n=>{this.$message.success("register successfully !"),this.$router.push("/login")}).catch(n=>{this.$message.error(n)}).finally(()=>{this.loadingRegister=!1})}})},validateConfirmPassword(){this.$refs.form.validateField("confirmPassword")}}},g=s=>(E("data-v-5949c1db"),s=s(),k(),s),R={class:"login-container"},B=g(()=>i("h3",{style:{"text-align":"center","margin-bottom":"40px"}},"Create new account",-1)),I=g(()=>i("div",{class:"width_100"},null,-1)),q=g(()=>i("span",{class:"font-12 color-999999 font-weight-400 font-family-HarmonyOS_Sans_Regular"},[m(" By creating an account you agree with our "),i("a",{target:"_blank",href:"/privacy_policy.html",class:"font-12 font-weight-400 font-family-HarmonyOS_Sans_Regular color-0547D7"},"Privacy Policy")],-1)),A={class:"form-footer",style:{"text-align":"center"}},M={class:"desp font-14 font-weight-400 font-family-HarmonyOS_Sans_Regular mt-10"};function T(s,e,n,c,o,u){const f=a("el-input"),p=a("el-button"),d=a("el-form-item"),h=a("el-checkbox"),_=a("router-link"),w=a("el-form");return P(),V("div",R,[r(w,{class:"login-form","label-position":"top","label-width":"auto",ref:"form",model:o.form,rules:o.rules,onSubmit:C(u.register,["prevent"])},{default:t(()=>[B,r(d,{label:"Email",prop:"email"},{default:t(()=>[r(f,{modelValue:o.form.email,"onUpdate:modelValue":e[0]||(e[0]=l=>o.form.email=l),modelModifiers:{trim:!0},placeholder:"Email",size:"large"},null,8,["modelValue"]),r(p,{class:"font-14 color-0547D7 font-weight-400 font-family-HarmonyOS_Sans_Regular code",onClick:u.sendVerificationCode,disabled:o.isSending},{default:t(()=>[m(x(u.buttonText),1)]),_:1},8,["onClick","disabled"])]),_:1}),r(d,{label:"Verification Code",prop:"code"},{default:t(()=>[r(f,{modelValue:o.form.code,"onUpdate:modelValue":e[1]||(e[1]=l=>o.form.code=l),modelModifiers:{trim:!0},placeholder:"Code",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),r(d,{label:"Password",prop:"password"},{default:t(()=>[r(f,{modelValue:o.form.password,"onUpdate:modelValue":e[2]||(e[2]=l=>o.form.password=l),modelModifiers:{trim:!0},type:"password",placeholder:"Enter your Password",size:"large",clearable:"","show-password":!0},null,8,["modelValue"]),I]),_:1}),r(d,{label:"Confirm Password",prop:"confirmPassword"},{default:t(()=>[r(f,{modelValue:o.form.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=l=>o.form.confirmPassword=l),modelModifiers:{trim:!0},type:"password",placeholder:"Confirm Password",size:"large",clearable:"","show-password":!0,onBlur:u.validateConfirmPassword},null,8,["modelValue","onBlur"])]),_:1}),r(d,{prop:"selected"},{default:t(()=>[r(h,{modelValue:o.form.selected,"onUpdate:modelValue":e[4]||(e[4]=l=>o.form.selected=l)},{default:t(()=>[q]),_:1},8,["modelValue"])]),_:1}),i("div",A,[r(p,{class:"submit-btn",type:"primary",size:"large",loading:o.loading,"native-type":"submit"},{default:t(()=>[m("Register")]),_:1},8,["loading"]),i("div",M,[m(" Already registered ? "),r(_,{class:"color-0547D7 font-14 ml-6",to:"/login"},{default:t(()=>[m("Sign in")]),_:1})])])]),_:1},8,["model","rules","onSubmit"])])}const D=b(z,[["render",T],["__scopeId","data-v-5949c1db"]]);export{D as default};
