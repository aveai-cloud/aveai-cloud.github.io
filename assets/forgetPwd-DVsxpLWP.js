import{_,s as b,v,c as y,b as s,w as t,m as C,r as a,o as P,j as u,t as V,a as f,p as S,k as x}from"./index-DT-wo-ax.js";const z={name:"Forget",data(){return{form:{email:"",password:"",confirmPassword:"",code:""},rules:{email:[{required:!0,message:"please enter email",trigger:"blur"},{pattern:/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/,message:"please enter correct email",trigger:"blur"}],code:[{required:!0,message:"please enter code",trigger:"blur"},{min:6,max:6,message:"please enter 6 code",trigger:"blur"}],password:[{required:!0,message:"please enter password",trigger:"blur"}],confirmPassword:[{required:!0,message:"please enter confirm password",trigger:"blur"},{validator:(i,c,e)=>{c!==this.form.password?e(new Error("Entered passwords differ!")):e()},trigger:"blur"}]},loading:!1,isSending:!1,countdown:60,timer:null,loadingRegister:!1}},mounted(){},computed:{buttonText(){return this.isSending?`${this.countdown} s`:"Get Reset Code"}},methods:{async sendVerificationCode(){this.isSending=!0;let r={emailType:"updatePassword",email:this.form.email};b(r).then(o=>{this.$message.success("The verification code has been sent, please check your email!"),this.startCountdown()}).catch(o=>{this.$message.error(o),this.isSending=!1}).finally(()=>{})},startCountdown(){this.timer=setInterval(()=>{this.countdown<=0?(clearInterval(this.timer),this.isSending=!1,this.countdown=60):this.countdown--},1e3)},register(){this.$refs.form.validate(r=>{if(r){let o={email:this.form.email,newPassword:this.form.password,code:this.form.code};this.loadingRegister=!0,v(o).then(i=>{this.$message.success("reset successfully !"),this.$router.push("/login")}).catch(i=>{this.$message.error(i)}).finally(()=>{this.loadingRegister=!1})}})},validateConfirmPassword(){this.$refs.form.validateField("confirmPassword")}}},g=r=>(S("data-v-7827734e"),r=r(),x(),r),E={class:"login-container"},k=g(()=>f("h3",{style:{"text-align":"center","margin-bottom":"40px"}},"Forgot password",-1)),I=g(()=>f("div",{class:"width_100"},null,-1)),R={class:"form-footer",style:{"text-align":"center"}},B={class:"desp font-14 font-weight-400 font-family-HarmonyOS_Sans_Regular mt-10"};function M(r,o,i,c,e,n){const d=a("el-input"),p=a("el-button"),m=a("el-form-item"),w=a("router-link"),h=a("el-form");return P(),y("div",E,[s(h,{class:"login-form","label-position":"top","label-width":"auto",ref:"form",model:e.form,rules:e.rules,onSubmit:C(n.register,["prevent"])},{default:t(()=>[k,s(m,{label:"Email",prop:"email"},{default:t(()=>[s(d,{modelValue:e.form.email,"onUpdate:modelValue":o[0]||(o[0]=l=>e.form.email=l),modelModifiers:{trim:!0},placeholder:"Email",size:"large"},null,8,["modelValue"]),s(p,{class:"font-14 color-0547D7 font-weight-400 font-family-HarmonyOS_Sans_Regular code",onClick:n.sendVerificationCode,disabled:e.isSending},{default:t(()=>[u(V(n.buttonText),1)]),_:1},8,["onClick","disabled"])]),_:1}),s(m,{label:"Verification Code",prop:"code"},{default:t(()=>[s(d,{modelValue:e.form.code,"onUpdate:modelValue":o[1]||(o[1]=l=>e.form.code=l),modelModifiers:{trim:!0},placeholder:"Code",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),s(m,{label:"Password",prop:"password"},{default:t(()=>[s(d,{modelValue:e.form.password,"onUpdate:modelValue":o[2]||(o[2]=l=>e.form.password=l),modelModifiers:{trim:!0},type:"password",placeholder:"Enter your Password",size:"large",clearable:"","show-password":!0},null,8,["modelValue"]),I]),_:1}),s(m,{label:"Confirm Password",prop:"confirmPassword"},{default:t(()=>[s(d,{modelValue:e.form.confirmPassword,"onUpdate:modelValue":o[3]||(o[3]=l=>e.form.confirmPassword=l),modelModifiers:{trim:!0},type:"password",placeholder:"Confirm Password",size:"large",clearable:"","show-password":!0,onBlur:n.validateConfirmPassword},null,8,["modelValue","onBlur"])]),_:1}),f("div",R,[s(p,{class:"submit-btn",type:"primary",size:"large",loading:e.loading,"native-type":"submit"},{default:t(()=>[u("Confirm")]),_:1},8,["loading"]),f("div",B,[u(" Already retrieved? "),s(w,{class:"color-0547D7 font-14 ml-6",to:"/login"},{default:t(()=>[u("Sign in")]),_:1})])])]),_:1},8,["model","rules","onSubmit"])])}const q=_(z,[["render",M],["__scopeId","data-v-7827734e"]]);export{q as default};
